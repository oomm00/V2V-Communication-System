{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">📡 Network Status</h2>

<div class="row mb-4">
  <div class="col-md-6">
    <div class="card bg-secondary text-light p-3">
      <h5>Messages per Second</h5>
      <h2>{{ metrics.messages_per_sec }}</h2>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card bg-secondary text-light p-3">
      <h5>Rejected Messages</h5>
      <h2>{{ metrics.rejected_count }}</h2>
    </div>
  </div>
</div>

<h3 class="mt-4">🚨 Verified Alerts</h3>
{% if verified %}
  <table class="table table-dark table-hover mt-3">
    <thead><tr><th>Hazard</th><th>Location</th><th>Action</th></tr></thead>
    <tbody>
    {% for alert in verified %}
      <tr>
        <td>{{ alert.hazard_type }}</td>
        <td>{{ alert.location }}</td>
        <td>
          <form action="/clear" method="post" class="d-inline">
            <input type="hidden" name="alert_key" value="{{ alert.key }}">
            <button class="btn btn-danger btn-sm">Clear</button>
          </form>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>No verified alerts right now.</p>
{% endif %}

<h3 class="mt-5">⚠️ Tentative Alerts</h3>
{% if tentative %}
  <ul class="list-group mt-3">
  {% for alert in tentative %}
    <li class="list-group-item bg-dark text-light">
      <strong>{{ alert.hazard_type }}</strong> — {{ alert.location }}
    </li>
  {% endfor %}
  </ul>
{% else %}
  <p>No tentative alerts currently.</p>
{% endif %}
{% endblock %}
